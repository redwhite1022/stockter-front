{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\redwh\\\\Desktop\\\\\\uAC1C\\uBC1C\\\\stock\\\\stockter\\\\front\\\\src\\\\components\\\\SearchPage.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef, useCallback } from \"react\";\nimport axios from \"axios\";\nimport StockTable from \"./StockTable\";\nimport \"../styles/Common.css\";\nimport \"../styles/SearchPage.css\";\nimport { Bar } from \"react-chartjs-2\";\nimport \"chart.js/auto\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst SearchPage = () => {\n  _s();\n  const [stocks, setStocks] = useState([]);\n  const [query, setQuery] = useState(\"\");\n  const [highlightedStock, setHighlightedStock] = useState(null);\n  const [filteredStocks, setFilteredStocks] = useState([]);\n  const [error, setError] = useState(\"\");\n  const [isDropdownOpen, setIsDropdownOpen] = useState(false);\n  const dropdownRef = useRef(null);\n\n  // (1) 연간 데이터 관련 상태\n  const [annualData, setAnnualData] = useState([]);\n  const [annualLoading, setAnnualLoading] = useState(false);\n  const [annualError, setAnnualError] = useState(\"\");\n  const [annualSelectedButton, setAnnualSelectedButton] = useState(\"\");\n\n  // (2) 분기 데이터 관련 상태\n  const [quarterlyData, setQuarterlyData] = useState([]);\n  const [quarterlyLoading, setQuarterlyLoading] = useState(false);\n  const [quarterlyError, setQuarterlyError] = useState(\"\");\n  const [quarterlySelectedButton, setQuarterlySelectedButton] = useState(\"\");\n\n  // (3) 최신 뉴스 관련 상태\n  const [newsData, setNewsData] = useState([]);\n  const [newsLoading, setNewsLoading] = useState(false);\n  const [newsError, setNewsError] = useState(\"\");\n  const quarterLabelMap = {\n    \"2023.Q1\": \"2023-Q1\",\n    \"2023.Q2\": \"2023-Q2\",\n    \"2023.Q3\": \"2023-Q3\",\n    \"2023.Q4\": \"2023-Q4\"\n  };\n  const annualChartRef = useRef(null);\n  const quarterlyChartRef = useRef(null);\n  const cleanValue = value => {\n    if (typeof value === \"string\") {\n      return value.replace(/[\\s,]+/g, \"\");\n    }\n    if (value === null || value === undefined) {\n      return \"N/A\";\n    }\n    return value;\n  };\n  const isPercentage = buttonName => {\n    const percentageButtons = [\"영업이익률\", \"부채비율\"];\n    return percentageButtons.includes(buttonName);\n  };\n\n  // 1) 검색 함수\n  const fetchData = useCallback((searchQuery = query) => {\n    if (!searchQuery.trim()) {\n      setError(\"검색어를 입력하세요.\");\n      return;\n    }\n    setError(\"\");\n    setFilteredStocks([]);\n    setIsDropdownOpen(false);\n    axios.get(\"https://port-0-stockter-back-m5or7nt39f4a0f5c.sel4.cloudtype.app/data\", {\n      params: {\n        query: searchQuery\n      }\n    }).then(response => {\n      if (response.data.error || response.data.stocks.length === 0) {\n        setError(\"검색 결과가 없습니다.\");\n        setStocks([]);\n        setHighlightedStock(null);\n      } else {\n        const mappedData = response.data.stocks.map(stock => ({\n          ...stock,\n          매출액: cleanValue(stock[\"매출액\"]),\n          영업이익: cleanValue(stock[\"영업이익\"]),\n          영업이익률: cleanValue(stock[\"영업이익률\"]),\n          시가배당률: cleanValue(stock[\"시가배당률(%)\"]),\n          부채비율: cleanValue(stock[\"부채비율\"])\n        }));\n        setStocks(mappedData);\n        setHighlightedStock(mappedData[0] || null);\n      }\n    }).catch(error => {\n      console.error(\"데이터 로드 오류:\", error);\n      setError(\"서버와 연결할 수 없습니다.\");\n    });\n  }, [query]);\n\n  // 2) 자동완성 로직\n  const handleQueryChange = useCallback(e => {\n    const input = e.target.value;\n    setQuery(input);\n    if (input.trim() === \"\") {\n      setFilteredStocks([]);\n      setIsDropdownOpen(false);\n    } else {\n      axios.get(\"https://port-0-stockter-back-m5or7nt39f4a0f5c.sel4.cloudtype.app/data\", {\n        params: {\n          query: input\n        }\n      }).then(response => {\n        if (response.data.stocks) {\n          const lowercasedInput = input.toLowerCase();\n          const filtered = response.data.stocks.filter(stock => {\n            const stockCode = stock[\"종목코드\"].toString().toLowerCase();\n            const stockName = stock[\"종목명\"].toLowerCase();\n            return stockCode.includes(lowercasedInput) || stockName.includes(lowercasedInput);\n          });\n          const startsWithQuery = filtered.filter(stock => {\n            const stockCode = stock[\"종목코드\"].toString().toLowerCase();\n            const stockName = stock[\"종목명\"].toLowerCase();\n            return stockCode.startsWith(lowercasedInput) || stockName.startsWith(lowercasedInput);\n          });\n          const others = filtered.filter(stock => {\n            const stockCode = stock[\"종목코드\"].toString().toLowerCase();\n            const stockName = stock[\"종목명\"].toLowerCase();\n            return !stockCode.startsWith(lowercasedInput) && !stockName.startsWith(lowercasedInput);\n          });\n          setFilteredStocks([...startsWithQuery, ...others].slice(0, 10));\n          setIsDropdownOpen(true);\n        }\n      }).catch(error => {\n        console.error(\"자동완성 데이터 로드 오류:\", error);\n      });\n    }\n  }, []);\n  const handleSuggestionClick = useCallback(stock => {\n    setQuery(stock[\"종목명\"]);\n    setIsDropdownOpen(false);\n    setHighlightedStock(stock);\n    fetchData(stock[\"종목명\"]);\n  }, [fetchData]);\n  const handleKeyPress = useCallback(e => {\n    if (e.key === \"Enter\") {\n      fetchData();\n      setIsDropdownOpen(false);\n    }\n  }, [fetchData]);\n\n  // 3) 기타 이벤트 (리셋 등)\n  const resetState = useCallback(() => {\n    setQuery(\"\");\n    setStocks([]);\n    setFilteredStocks([]);\n    setError(\"\");\n    setIsDropdownOpen(false);\n    setHighlightedStock(null);\n    setAnnualData([]);\n    setAnnualLoading(false);\n    setAnnualError(\"\");\n    setAnnualSelectedButton(\"\");\n    setQuarterlyData([]);\n    setQuarterlyLoading(false);\n    setQuarterlyError(\"\");\n    setQuarterlySelectedButton(\"\");\n    setNewsData([]);\n    setNewsLoading(false);\n    setNewsError(\"\");\n  }, []);\n  useEffect(() => {\n    const handleOutsideClick = e => {\n      if (dropdownRef.current && !dropdownRef.current.contains(e.target)) {\n        setIsDropdownOpen(false);\n      }\n    };\n    document.addEventListener(\"mousedown\", handleOutsideClick);\n    return () => {\n      document.removeEventListener(\"mousedown\", handleOutsideClick);\n    };\n  }, []);\n  const highlightMatch = useCallback((text, query) => {\n    if (!query) return text;\n    const regex = new RegExp(`(${query})`, \"gi\");\n    return text.replace(regex, match => `<span class=\"highlight\">${match}</span>`);\n  }, []);\n\n  // 4) 연간 재무데이터 버튼 핸들러\n  const handleAnnualButtonClick = useCallback(async buttonName => {\n    if (annualLoading) {\n      console.warn(\"연간 데이터 로딩 중입니다. 잠시만 기다려주세요.\");\n      return;\n    }\n    if (!highlightedStock) {\n      setAnnualError(\"종목을 선택하지 않았습니다. 검색 후 선택해주세요.\");\n      return;\n    }\n    setAnnualLoading(true);\n    setAnnualError(\"\");\n    setAnnualData([]);\n    setAnnualSelectedButton(buttonName);\n    let endpoint = \"\";\n    if (buttonName === \"매출액\") {\n      endpoint = \"financial-annual-sales\";\n    } else if (buttonName === \"영업이익\") {\n      endpoint = \"financial-operating-profit\";\n    } else if (buttonName === \"영업이익률\") {\n      endpoint = \"financial-operating-income-rate\";\n    } else if (buttonName === \"순이익\") {\n      endpoint = \"financial-net-income\";\n    } else if (buttonName === \"부채비율\") {\n      endpoint = \"financial-debt-ratio\";\n    } else {\n      console.warn(\"지원되지 않는 버튼입니다(연간).\");\n      setAnnualLoading(false);\n      return;\n    }\n    try {\n      const response = await axios.get(`https://port-0-stockter-back-m5or7nt39f4a0f5c.sel4.cloudtype.app/${endpoint}`, {\n        params: {\n          stock_name: highlightedStock[\"종목명\"]\n        }\n      });\n      let data = null;\n      if (buttonName === \"매출액\" && response.data.annual_sales) {\n        data = response.data.annual_sales;\n      } else if (buttonName === \"영업이익\" && response.data.operating_profit) {\n        data = response.data.operating_profit;\n      } else if (buttonName === \"영업이익률\" && response.data.operating_income_rate) {\n        data = response.data.operating_income_rate;\n      } else if (buttonName === \"순이익\" && response.data.net_income) {\n        data = response.data.net_income;\n      } else if (buttonName === \"부채비율\" && response.data.debt_ratio) {\n        data = response.data.debt_ratio;\n      }\n      if (data && data.length > 0) {\n        setAnnualData(data);\n      } else {\n        setAnnualError(`${buttonName} 데이터가 없습니다.`);\n      }\n    } catch (error) {\n      console.error(\"연간 데이터 로드 오류:\", error);\n      setAnnualError(`${buttonName} 데이터를 가져오는 중 오류가 발생했습니다.`);\n    } finally {\n      setAnnualLoading(false);\n    }\n  }, [highlightedStock, annualLoading]);\n\n  // 5) 분기별 재무데이터 버튼 핸들러\n  const handleQuarterlyButtonClick = useCallback(async buttonName => {\n    if (quarterlyLoading) {\n      console.warn(\"분기별 데이터 로딩 중입니다. 잠시만 기다려주세요.\");\n      return;\n    }\n    if (!highlightedStock) {\n      setQuarterlyError(\"종목을 선택하지 않았습니다. 검색 후 선택해주세요.\");\n      return;\n    }\n    setQuarterlyLoading(true);\n    setQuarterlyError(\"\");\n    setQuarterlyData([]);\n    setQuarterlySelectedButton(buttonName);\n    let endpoint = \"\";\n    if (buttonName === \"매출액\") {\n      endpoint = \"financial-quarterly-sales\";\n    } else if (buttonName === \"영업이익\") {\n      endpoint = \"financial-quarterly-operating-profit\";\n    } else if (buttonName === \"영업이익률\") {\n      endpoint = \"financial-quarterly-operating-income-rate\";\n    } else if (buttonName === \"순이익\") {\n      endpoint = \"financial-quarterly-net-income\";\n    } else if (buttonName === \"부채비율\") {\n      endpoint = \"financial-quarterly-debt-ratio\";\n    } else {\n      console.warn(\"지원되지 않는 버튼입니다(분기).\");\n      setQuarterlyLoading(false);\n      return;\n    }\n    try {\n      const response = await axios.get(`https://port-0-stockter-back-m5or7nt39f4a0f5c.sel4.cloudtype.app/${endpoint}`, {\n        params: {\n          stock_name: highlightedStock[\"종목명\"]\n        }\n      });\n      let data = null;\n      if (buttonName === \"매출액\" && response.data.quarterly_sales) {\n        data = response.data.quarterly_sales;\n      } else if (buttonName === \"영업이익\" && response.data.quarterly_operating_profit) {\n        data = response.data.quarterly_operating_profit;\n      } else if (buttonName === \"영업이익률\" && response.data.quarterly_operating_income_rate) {\n        data = response.data.quarterly_operating_income_rate;\n      } else if (buttonName === \"순이익\" && response.data.quarterly_net_income) {\n        data = response.data.quarterly_net_income;\n      } else if (buttonName === \"부채비율\" && response.data.quarterly_debt_ratio) {\n        data = response.data.quarterly_debt_ratio;\n      }\n      if (data && data.length > 0) {\n        setQuarterlyData(data);\n      } else {\n        setQuarterlyError(`${buttonName} 분기별 데이터가 없습니다.`);\n      }\n    } catch (error) {\n      console.error(\"분기별 데이터 로드 오류:\", error);\n      setQuarterlyError(`${buttonName} 분기별 데이터를 가져오는 중 오류가 발생했습니다.`);\n    } finally {\n      setQuarterlyLoading(false);\n    }\n  }, [highlightedStock, quarterlyLoading]);\n\n  // 6) 최신 뉴스 API 호출 함수\n  const fetchLatestNews = async () => {\n    if (!highlightedStock) {\n      setNewsError(\"종목을 선택하지 않았습니다. 검색 후 선택해주세요.\");\n      return;\n    }\n    setNewsLoading(true);\n    setNewsError(\"\");\n    setNewsData([]);\n    try {\n      const response = await axios.get(\"https://port-0-stockter-back-m5or7nt39f4a0f5c.sel4.cloudtype.app/latest-news\", {\n        params: {\n          stock_name: highlightedStock[\"종목명\"]\n        }\n      });\n      if (response.data.latest_news && response.data.latest_news.length > 0) {\n        setNewsData(response.data.latest_news);\n      } else {\n        setNewsError(\"최신 뉴스 데이터가 없습니다.\");\n      }\n    } catch (error) {\n      console.error(\"최신 뉴스 로드 오류:\", error);\n      setNewsError(\"최신 뉴스 데이터를 가져오는 중 오류가 발생했습니다.\");\n    } finally {\n      setNewsLoading(false);\n    }\n  };\n\n  // 7) 자동 스크롤 (연간/분기)\n  useEffect(() => {\n    if (annualData.length > 0 && annualChartRef.current) {\n      annualChartRef.current.scrollIntoView({\n        behavior: \"smooth\",\n        block: \"start\"\n      });\n    }\n  }, [annualData]);\n  useEffect(() => {\n    if (quarterlyData.length > 0 && quarterlyChartRef.current) {\n      quarterlyChartRef.current.scrollIntoView({\n        behavior: \"smooth\",\n        block: \"start\"\n      });\n    }\n  }, [quarterlyData]);\n  const annualChartData = {\n    labels: annualData.map(item => item.연도 || item.label || \"N/A\"),\n    datasets: [{\n      label: isPercentage(annualSelectedButton) ? `${annualSelectedButton} (%)` : `${annualSelectedButton} (억)`,\n      data: annualData.map(item => item[annualSelectedButton]),\n      backgroundColor: annualSelectedButton === \"매출액\" ? \"rgba(75, 192, 192, 0.6)\" : annualSelectedButton === \"영업이익\" ? \"rgba(255, 159, 64, 0.6)\" : annualSelectedButton === \"영업이익률\" ? \"rgba(54, 162, 235, 0.6)\" : annualSelectedButton === \"순이익\" ? \"rgba(153, 102, 255, 0.6)\" : annualSelectedButton === \"부채비율\" ? \"rgba(255, 206, 86, 0.6)\" : \"rgba(75, 192, 192, 0.6)\",\n      borderColor: annualSelectedButton === \"매출액\" ? \"rgba(75, 192, 192, 1)\" : annualSelectedButton === \"영업이익\" ? \"rgba(255, 159, 64, 1)\" : annualSelectedButton === \"영업이익률\" ? \"rgba(54, 162, 235, 1)\" : annualSelectedButton === \"순이익\" ? \"rgba(153, 102, 255, 1)\" : annualSelectedButton === \"부채비율\" ? \"rgba(255, 206, 86, 1)\" : \"rgba(75, 192, 192, 1)\",\n      borderWidth: 1\n    }]\n  };\n  const quarterlyChartData = {\n    labels: quarterlyData.map(item => item.분기 || item.label || \"N/A\"),\n    datasets: [{\n      label: isPercentage(quarterlySelectedButton) ? `${quarterlySelectedButton} (%)` : `${quarterlySelectedButton} (억)`,\n      data: quarterlyData.map(item => item[quarterlySelectedButton]),\n      backgroundColor: quarterlySelectedButton === \"매출액\" ? \"rgba(75, 192, 192, 0.6)\" : quarterlySelectedButton === \"영업이익\" ? \"rgba(255, 159, 64, 0.6)\" : quarterlySelectedButton === \"영업이익률\" ? \"rgba(54, 162, 235, 0.6)\" : quarterlySelectedButton === \"순이익\" ? \"rgba(153, 102, 255, 0.6)\" : quarterlySelectedButton === \"부채비율\" ? \"rgba(255, 206, 86, 0.6)\" : \"rgba(75, 192, 192, 0.6)\",\n      borderColor: quarterlySelectedButton === \"매출액\" ? \"rgba(75, 192, 192, 1)\" : quarterlySelectedButton === \"영업이익\" ? \"rgba(255, 159, 64, 1)\" : quarterlySelectedButton === \"영업이익률\" ? \"rgba(54, 162, 235, 1)\" : quarterlySelectedButton === \"순이익\" ? \"rgba(153, 102, 255, 1)\" : quarterlySelectedButton === \"부채비율\" ? \"rgba(255, 206, 86, 1)\" : \"rgba(75, 192, 192, 1)\",\n      borderWidth: 1\n    }]\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"search-page-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      onClick: resetState,\n      className: \"search-page-title\",\n      children: \"\\uC885\\uBAA9\\uAC80\\uC0C9\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 468,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"search-input-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"search-input-wrapper\",\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          placeholder: \"\\uC885\\uBAA9\\uBA85 \\uB610\\uB294 \\uC885\\uBAA9\\uCF54\\uB4DC \\uC785\\uB825\",\n          value: query,\n          onChange: handleQueryChange,\n          onKeyPress: handleKeyPress\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 474,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"search-button\",\n          onClick: () => fetchData(),\n          children: \"\\uC885\\uBAA9 \\uAC80\\uC0C9\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 481,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 473,\n        columnNumber: 9\n      }, this), isDropdownOpen && /*#__PURE__*/_jsxDEV(\"div\", {\n        ref: dropdownRef,\n        className: \"dropdown\",\n        children: filteredStocks.map((stock, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"dropdown-item\",\n          onClick: () => handleSuggestionClick(stock),\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            dangerouslySetInnerHTML: {\n              __html: highlightMatch(stock[\"종목명\"] || \"\", query)\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 493,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"dropdown-code\",\n            children: stock[\"종목코드\"] || \"\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 498,\n            columnNumber: 17\n          }, this)]\n        }, index, true, {\n          fileName: _jsxFileName,\n          lineNumber: 488,\n          columnNumber: 15\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 486,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 472,\n      columnNumber: 7\n    }, this), error && /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"error-message\",\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 507,\n      columnNumber: 17\n    }, this), highlightedStock && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"highlighted-stock\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"\\uC885\\uBAA9 \\uC815\\uBCF4\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 511,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"\\uC2DC\\uC7A5: \", highlightedStock[\"시장\"] || \"N/A\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 512,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"\\uC885\\uBAA9\\uCF54\\uB4DC: \", highlightedStock[\"종목코드\"] || \"N/A\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 513,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"\\uC885\\uBAA9\\uBA85: \", highlightedStock[\"종목명\"] || \"N/A\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 514,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"\\uC5C5\\uC885\\uBA85: \", highlightedStock[\"업종명\"] || \"N/A\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 515,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"\\uC2DC\\uAC00\\uCD1D\\uC561: \", highlightedStock[\"시가총액\"] || \"N/A\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 516,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 510,\n      columnNumber: 9\n    }, this), stocks.length > 0 && /*#__PURE__*/_jsxDEV(StockTable, {\n      stocks: stocks,\n      excludeKeys: [\"시장\", \"종목코드\", \"종목명\", \"업종명\", \"시가총액\", \"시가총액(숫자형)\", \"종목명_lower\", \"종목코드_str\", \"부채비율\"]\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 521,\n      columnNumber: 9\n    }, this), stocks.length > 0 && /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        className: \"annual-data-title\",\n        children: \"\\uC5F0\\uAC04 \\uC7AC\\uBB34\\uB370\\uC774\\uD130\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 539,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"annual-buttons-container\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => handleAnnualButtonClick(\"매출액\"),\n          disabled: annualLoading && annualSelectedButton === \"매출액\",\n          children: annualLoading && annualSelectedButton === \"매출액\" ? \"매출액 로딩 중...\" : \"매출액\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 541,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => handleAnnualButtonClick(\"영업이익\"),\n          disabled: annualLoading && annualSelectedButton === \"영업이익\",\n          children: annualLoading && annualSelectedButton === \"영업이익\" ? \"영업이익 로딩 중...\" : \"영업이익\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 549,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => handleAnnualButtonClick(\"영업이익률\"),\n          disabled: annualLoading && annualSelectedButton === \"영업이익률\",\n          children: annualLoading && annualSelectedButton === \"영업이익률\" ? \"영업이익률 로딩 중...\" : \"영업이익률\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 557,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => handleAnnualButtonClick(\"순이익\"),\n          disabled: annualLoading && annualSelectedButton === \"순이익\",\n          children: annualLoading && annualSelectedButton === \"순이익\" ? \"순이익 로딩 중...\" : \"순이익\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 565,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => handleAnnualButtonClick(\"부채비율\"),\n          disabled: annualLoading && annualSelectedButton === \"부채비율\",\n          children: annualLoading && annualSelectedButton === \"부채비율\" ? \"부채비율 로딩 중...\" : \"부채비율\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 573,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 540,\n        columnNumber: 11\n      }, this), annualLoading && /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"\\uC5F0\\uAC04 \\uB370\\uC774\\uD130\\uB97C \\uB85C\\uB4DC \\uC911\\uC785\\uB2C8\\uB2E4...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 583,\n        columnNumber: 29\n      }, this), annualError && /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"error-message\",\n        children: annualError\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 584,\n        columnNumber: 27\n      }, this), annualData && annualData.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"financial-data-chart financial-chart\",\n        ref: annualChartRef,\n        children: /*#__PURE__*/_jsxDEV(Bar, {\n          data: annualChartData,\n          options: {\n            responsive: true,\n            maintainAspectRatio: false,\n            plugins: {\n              legend: {\n                position: \"top\"\n              },\n              title: {\n                display: true,\n                text: `${(highlightedStock === null || highlightedStock === void 0 ? void 0 : highlightedStock.종목명) || \"\"} 연간 ${annualSelectedButton}`\n              }\n            },\n            scales: {\n              y: {\n                beginAtZero: false,\n                ticks: {\n                  callback: function (value) {\n                    if (isPercentage(annualSelectedButton)) {\n                      return value.toFixed(1) + \"%\";\n                    }\n                    return value.toLocaleString() + \"억\";\n                  }\n                }\n              }\n            }\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 591,\n          columnNumber: 15\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 587,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true), stocks.length > 0 && /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        className: \"quarterly-data-title\",\n        children: \"\\uBD84\\uAE30\\uBCC4 \\uC7AC\\uBB34\\uB370\\uC774\\uD130\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 625,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"quarterly-buttons-container\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => handleQuarterlyButtonClick(\"매출액\"),\n          disabled: quarterlyLoading && quarterlySelectedButton === \"매출액\",\n          children: quarterlyLoading && quarterlySelectedButton === \"매출액\" ? \"매출액 로딩 중...\" : \"매출액\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 627,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => handleQuarterlyButtonClick(\"영업이익\"),\n          disabled: quarterlyLoading && quarterlySelectedButton === \"영업이익\",\n          children: quarterlyLoading && quarterlySelectedButton === \"영업이익\" ? \"영업이익 로딩 중...\" : \"영업이익\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 635,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => handleQuarterlyButtonClick(\"영업이익률\"),\n          disabled: quarterlyLoading && quarterlySelectedButton === \"영업이익률\",\n          children: quarterlyLoading && quarterlySelectedButton === \"영업이익률\" ? \"영업이익률 로딩 중...\" : \"영업이익률\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 643,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => handleQuarterlyButtonClick(\"순이익\"),\n          disabled: quarterlyLoading && quarterlySelectedButton === \"순이익\",\n          children: quarterlyLoading && quarterlySelectedButton === \"순이익\" ? \"순이익 로딩 중...\" : \"순이익\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 651,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => handleQuarterlyButtonClick(\"부채비율\"),\n          disabled: quarterlyLoading && quarterlySelectedButton === \"부채비율\",\n          children: quarterlyLoading && quarterlySelectedButton === \"부채비율\" ? \"부채비율 로딩 중...\" : \"부채비율\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 659,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 626,\n        columnNumber: 11\n      }, this), quarterlyLoading && /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"\\uBD84\\uAE30\\uBCC4 \\uB370\\uC774\\uD130\\uB97C \\uB85C\\uB4DC \\uC911\\uC785\\uB2C8\\uB2E4...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 669,\n        columnNumber: 32\n      }, this), quarterlyError && /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"error-message\",\n        children: quarterlyError\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 670,\n        columnNumber: 30\n      }, this), quarterlyData && quarterlyData.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"financial-data-chart financial-chart\",\n        ref: quarterlyChartRef,\n        children: /*#__PURE__*/_jsxDEV(Bar, {\n          data: quarterlyChartData,\n          options: {\n            responsive: true,\n            maintainAspectRatio: false,\n            plugins: {\n              legend: {\n                position: \"top\"\n              },\n              title: {\n                display: true,\n                text: `${(highlightedStock === null || highlightedStock === void 0 ? void 0 : highlightedStock.종목명) || \"\"} 분기별 ${quarterlySelectedButton}`\n              }\n            },\n            scales: {\n              y: {\n                beginAtZero: false,\n                ticks: {\n                  callback: function (value) {\n                    if (isPercentage(quarterlySelectedButton)) {\n                      return value.toFixed(1) + \"%\";\n                    }\n                    return value.toLocaleString() + \"억\";\n                  }\n                }\n              }\n            }\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 677,\n          columnNumber: 15\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 673,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true), highlightedStock && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"latest-news-section\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"\\uCD5C\\uC2E0 \\uB274\\uC2A4\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 711,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: fetchLatestNews,\n        disabled: newsLoading,\n        children: newsLoading ? \"뉴스 로딩 중...\" : \"최신 뉴스 가져오기\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 712,\n        columnNumber: 11\n      }, this), newsError && /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"error-message\",\n        children: newsError\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 715,\n        columnNumber: 25\n      }, this), newsData && newsData.length > 0 && /*#__PURE__*/_jsxDEV(\"ul\", {\n        className: \"news-list\",\n        children: newsData.map((newsItem, index) => /*#__PURE__*/_jsxDEV(\"li\", {\n          children: [/*#__PURE__*/_jsxDEV(\"a\", {\n            href: newsItem.link,\n            target: \"_blank\",\n            rel: \"noopener noreferrer\",\n            children: newsItem.title\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 720,\n            columnNumber: 19\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: newsItem.summary\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 723,\n            columnNumber: 19\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: newsItem.date\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 724,\n            columnNumber: 19\n          }, this)]\n        }, index, true, {\n          fileName: _jsxFileName,\n          lineNumber: 719,\n          columnNumber: 17\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 717,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 710,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 467,\n    columnNumber: 5\n  }, this);\n};\n_s(SearchPage, \"XYh4h/D+rHPswiB05HxGEUzuzAY=\");\n_c = SearchPage;\nexport default SearchPage;\nvar _c;\n$RefreshReg$(_c, \"SearchPage\");","map":{"version":3,"names":["React","useState","useEffect","useRef","useCallback","axios","StockTable","Bar","jsxDEV","_jsxDEV","Fragment","_Fragment","SearchPage","_s","stocks","setStocks","query","setQuery","highlightedStock","setHighlightedStock","filteredStocks","setFilteredStocks","error","setError","isDropdownOpen","setIsDropdownOpen","dropdownRef","annualData","setAnnualData","annualLoading","setAnnualLoading","annualError","setAnnualError","annualSelectedButton","setAnnualSelectedButton","quarterlyData","setQuarterlyData","quarterlyLoading","setQuarterlyLoading","quarterlyError","setQuarterlyError","quarterlySelectedButton","setQuarterlySelectedButton","newsData","setNewsData","newsLoading","setNewsLoading","newsError","setNewsError","quarterLabelMap","annualChartRef","quarterlyChartRef","cleanValue","value","replace","undefined","isPercentage","buttonName","percentageButtons","includes","fetchData","searchQuery","trim","get","params","then","response","data","length","mappedData","map","stock","매출액","영업이익","영업이익률","시가배당률","부채비율","catch","console","handleQueryChange","e","input","target","lowercasedInput","toLowerCase","filtered","filter","stockCode","toString","stockName","startsWithQuery","startsWith","others","slice","handleSuggestionClick","handleKeyPress","key","resetState","handleOutsideClick","current","contains","document","addEventListener","removeEventListener","highlightMatch","text","regex","RegExp","match","handleAnnualButtonClick","warn","endpoint","stock_name","annual_sales","operating_profit","operating_income_rate","net_income","debt_ratio","handleQuarterlyButtonClick","quarterly_sales","quarterly_operating_profit","quarterly_operating_income_rate","quarterly_net_income","quarterly_debt_ratio","fetchLatestNews","latest_news","scrollIntoView","behavior","block","annualChartData","labels","item","연도","label","datasets","backgroundColor","borderColor","borderWidth","quarterlyChartData","분기","className","children","onClick","fileName","_jsxFileName","lineNumber","columnNumber","type","placeholder","onChange","onKeyPress","ref","index","dangerouslySetInnerHTML","__html","excludeKeys","disabled","options","responsive","maintainAspectRatio","plugins","legend","position","title","display","종목명","scales","y","beginAtZero","ticks","callback","toFixed","toLocaleString","newsItem","href","link","rel","summary","date","_c","$RefreshReg$"],"sources":["C:/Users/redwh/Desktop/개발/stock/stockter/front/src/components/SearchPage.jsx"],"sourcesContent":["import React, { useState, useEffect, useRef, useCallback } from \"react\";\r\nimport axios from \"axios\";\r\nimport StockTable from \"./StockTable\";\r\nimport \"../styles/Common.css\";\r\nimport \"../styles/SearchPage.css\";\r\nimport { Bar } from \"react-chartjs-2\";\r\nimport \"chart.js/auto\";\r\n\r\nconst SearchPage = () => {\r\n  const [stocks, setStocks] = useState([]);\r\n  const [query, setQuery] = useState(\"\");\r\n  const [highlightedStock, setHighlightedStock] = useState(null);\r\n  const [filteredStocks, setFilteredStocks] = useState([]);\r\n  const [error, setError] = useState(\"\");\r\n  const [isDropdownOpen, setIsDropdownOpen] = useState(false);\r\n  const dropdownRef = useRef(null);\r\n\r\n  // (1) 연간 데이터 관련 상태\r\n  const [annualData, setAnnualData] = useState([]);\r\n  const [annualLoading, setAnnualLoading] = useState(false);\r\n  const [annualError, setAnnualError] = useState(\"\");\r\n  const [annualSelectedButton, setAnnualSelectedButton] = useState(\"\");\r\n\r\n  // (2) 분기 데이터 관련 상태\r\n  const [quarterlyData, setQuarterlyData] = useState([]);\r\n  const [quarterlyLoading, setQuarterlyLoading] = useState(false);\r\n  const [quarterlyError, setQuarterlyError] = useState(\"\");\r\n  const [quarterlySelectedButton, setQuarterlySelectedButton] = useState(\"\");\r\n\r\n  // (3) 최신 뉴스 관련 상태\r\n  const [newsData, setNewsData] = useState([]);\r\n  const [newsLoading, setNewsLoading] = useState(false);\r\n  const [newsError, setNewsError] = useState(\"\");\r\n\r\n  const quarterLabelMap = {\r\n    \"2023.Q1\": \"2023-Q1\",\r\n    \"2023.Q2\": \"2023-Q2\",\r\n    \"2023.Q3\": \"2023-Q3\",\r\n    \"2023.Q4\": \"2023-Q4\",\r\n  };\r\n\r\n  const annualChartRef = useRef(null);\r\n  const quarterlyChartRef = useRef(null);\r\n\r\n  const cleanValue = (value) => {\r\n    if (typeof value === \"string\") {\r\n      return value.replace(/[\\s,]+/g, \"\");\r\n    }\r\n    if (value === null || value === undefined) {\r\n      return \"N/A\";\r\n    }\r\n    return value;\r\n  };\r\n\r\n  const isPercentage = (buttonName) => {\r\n    const percentageButtons = [\"영업이익률\", \"부채비율\"];\r\n    return percentageButtons.includes(buttonName);\r\n  };\r\n\r\n  // 1) 검색 함수\r\n  const fetchData = useCallback(\r\n    (searchQuery = query) => {\r\n      if (!searchQuery.trim()) {\r\n        setError(\"검색어를 입력하세요.\");\r\n        return;\r\n      }\r\n      setError(\"\");\r\n      setFilteredStocks([]);\r\n      setIsDropdownOpen(false);\r\n\r\n      axios\r\n        .get(\"https://port-0-stockter-back-m5or7nt39f4a0f5c.sel4.cloudtype.app/data\", {\r\n          params: { query: searchQuery },\r\n        })\r\n        .then((response) => {\r\n          if (response.data.error || response.data.stocks.length === 0) {\r\n            setError(\"검색 결과가 없습니다.\");\r\n            setStocks([]);\r\n            setHighlightedStock(null);\r\n          } else {\r\n            const mappedData = response.data.stocks.map((stock) => ({\r\n              ...stock,\r\n              매출액: cleanValue(stock[\"매출액\"]),\r\n              영업이익: cleanValue(stock[\"영업이익\"]),\r\n              영업이익률: cleanValue(stock[\"영업이익률\"]),\r\n              시가배당률: cleanValue(stock[\"시가배당률(%)\"]),\r\n              부채비율: cleanValue(stock[\"부채비율\"]),\r\n            }));\r\n\r\n            setStocks(mappedData);\r\n            setHighlightedStock(mappedData[0] || null);\r\n          }\r\n        })\r\n        .catch((error) => {\r\n          console.error(\"데이터 로드 오류:\", error);\r\n          setError(\"서버와 연결할 수 없습니다.\");\r\n        });\r\n    },\r\n    [query]\r\n  );\r\n\r\n  // 2) 자동완성 로직\r\n  const handleQueryChange = useCallback((e) => {\r\n    const input = e.target.value;\r\n    setQuery(input);\r\n\r\n    if (input.trim() === \"\") {\r\n      setFilteredStocks([]);\r\n      setIsDropdownOpen(false);\r\n    } else {\r\n      axios\r\n        .get(\"https://port-0-stockter-back-m5or7nt39f4a0f5c.sel4.cloudtype.app/data\", {\r\n          params: { query: input },\r\n        })\r\n        .then((response) => {\r\n          if (response.data.stocks) {\r\n            const lowercasedInput = input.toLowerCase();\r\n            const filtered = response.data.stocks.filter((stock) => {\r\n              const stockCode = stock[\"종목코드\"].toString().toLowerCase();\r\n              const stockName = stock[\"종목명\"].toLowerCase();\r\n              return (\r\n                stockCode.includes(lowercasedInput) ||\r\n                stockName.includes(lowercasedInput)\r\n              );\r\n            });\r\n\r\n            const startsWithQuery = filtered.filter((stock) => {\r\n              const stockCode = stock[\"종목코드\"].toString().toLowerCase();\r\n              const stockName = stock[\"종목명\"].toLowerCase();\r\n              return (\r\n                stockCode.startsWith(lowercasedInput) ||\r\n                stockName.startsWith(lowercasedInput)\r\n              );\r\n            });\r\n            const others = filtered.filter((stock) => {\r\n              const stockCode = stock[\"종목코드\"].toString().toLowerCase();\r\n              const stockName = stock[\"종목명\"].toLowerCase();\r\n              return (\r\n                !stockCode.startsWith(lowercasedInput) &&\r\n                !stockName.startsWith(lowercasedInput)\r\n              );\r\n            });\r\n\r\n            setFilteredStocks([...startsWithQuery, ...others].slice(0, 10));\r\n            setIsDropdownOpen(true);\r\n          }\r\n        })\r\n        .catch((error) => {\r\n          console.error(\"자동완성 데이터 로드 오류:\", error);\r\n        });\r\n    }\r\n  }, []);\r\n\r\n  const handleSuggestionClick = useCallback(\r\n    (stock) => {\r\n      setQuery(stock[\"종목명\"]);\r\n      setIsDropdownOpen(false);\r\n      setHighlightedStock(stock);\r\n      fetchData(stock[\"종목명\"]);\r\n    },\r\n    [fetchData]\r\n  );\r\n\r\n  const handleKeyPress = useCallback(\r\n    (e) => {\r\n      if (e.key === \"Enter\") {\r\n        fetchData();\r\n        setIsDropdownOpen(false);\r\n      }\r\n    },\r\n    [fetchData]\r\n  );\r\n\r\n  // 3) 기타 이벤트 (리셋 등)\r\n  const resetState = useCallback(() => {\r\n    setQuery(\"\");\r\n    setStocks([]);\r\n    setFilteredStocks([]);\r\n    setError(\"\");\r\n    setIsDropdownOpen(false);\r\n    setHighlightedStock(null);\r\n\r\n    setAnnualData([]);\r\n    setAnnualLoading(false);\r\n    setAnnualError(\"\");\r\n    setAnnualSelectedButton(\"\");\r\n\r\n    setQuarterlyData([]);\r\n    setQuarterlyLoading(false);\r\n    setQuarterlyError(\"\");\r\n    setQuarterlySelectedButton(\"\");\r\n\r\n    setNewsData([]);\r\n    setNewsLoading(false);\r\n    setNewsError(\"\");\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const handleOutsideClick = (e) => {\r\n      if (dropdownRef.current && !dropdownRef.current.contains(e.target)) {\r\n        setIsDropdownOpen(false);\r\n      }\r\n    };\r\n    document.addEventListener(\"mousedown\", handleOutsideClick);\r\n    return () => {\r\n      document.removeEventListener(\"mousedown\", handleOutsideClick);\r\n    };\r\n  }, []);\r\n\r\n  const highlightMatch = useCallback((text, query) => {\r\n    if (!query) return text;\r\n    const regex = new RegExp(`(${query})`, \"gi\");\r\n    return text.replace(regex, (match) => `<span class=\"highlight\">${match}</span>`);\r\n  }, []);\r\n\r\n  // 4) 연간 재무데이터 버튼 핸들러\r\n  const handleAnnualButtonClick = useCallback(\r\n    async (buttonName) => {\r\n      if (annualLoading) {\r\n        console.warn(\"연간 데이터 로딩 중입니다. 잠시만 기다려주세요.\");\r\n        return;\r\n      }\r\n      if (!highlightedStock) {\r\n        setAnnualError(\"종목을 선택하지 않았습니다. 검색 후 선택해주세요.\");\r\n        return;\r\n      }\r\n\r\n      setAnnualLoading(true);\r\n      setAnnualError(\"\");\r\n      setAnnualData([]);\r\n      setAnnualSelectedButton(buttonName);\r\n\r\n      let endpoint = \"\";\r\n      if (buttonName === \"매출액\") {\r\n        endpoint = \"financial-annual-sales\";\r\n      } else if (buttonName === \"영업이익\") {\r\n        endpoint = \"financial-operating-profit\";\r\n      } else if (buttonName === \"영업이익률\") {\r\n        endpoint = \"financial-operating-income-rate\";\r\n      } else if (buttonName === \"순이익\") {\r\n        endpoint = \"financial-net-income\";\r\n      } else if (buttonName === \"부채비율\") {\r\n        endpoint = \"financial-debt-ratio\";\r\n      } else {\r\n        console.warn(\"지원되지 않는 버튼입니다(연간).\");\r\n        setAnnualLoading(false);\r\n        return;\r\n      }\r\n\r\n      try {\r\n        const response = await axios.get(\r\n          `https://port-0-stockter-back-m5or7nt39f4a0f5c.sel4.cloudtype.app/${endpoint}`,\r\n          { params: { stock_name: highlightedStock[\"종목명\"] } }\r\n        );\r\n\r\n        let data = null;\r\n        if (buttonName === \"매출액\" && response.data.annual_sales) {\r\n          data = response.data.annual_sales;\r\n        } else if (buttonName === \"영업이익\" && response.data.operating_profit) {\r\n          data = response.data.operating_profit;\r\n        } else if (buttonName === \"영업이익률\" && response.data.operating_income_rate) {\r\n          data = response.data.operating_income_rate;\r\n        } else if (buttonName === \"순이익\" && response.data.net_income) {\r\n          data = response.data.net_income;\r\n        } else if (buttonName === \"부채비율\" && response.data.debt_ratio) {\r\n          data = response.data.debt_ratio;\r\n        }\r\n\r\n        if (data && data.length > 0) {\r\n          setAnnualData(data);\r\n        } else {\r\n          setAnnualError(`${buttonName} 데이터가 없습니다.`);\r\n        }\r\n      } catch (error) {\r\n        console.error(\"연간 데이터 로드 오류:\", error);\r\n        setAnnualError(`${buttonName} 데이터를 가져오는 중 오류가 발생했습니다.`);\r\n      } finally {\r\n        setAnnualLoading(false);\r\n      }\r\n    },\r\n    [highlightedStock, annualLoading]\r\n  );\r\n\r\n  // 5) 분기별 재무데이터 버튼 핸들러\r\n  const handleQuarterlyButtonClick = useCallback(\r\n    async (buttonName) => {\r\n      if (quarterlyLoading) {\r\n        console.warn(\"분기별 데이터 로딩 중입니다. 잠시만 기다려주세요.\");\r\n        return;\r\n      }\r\n      if (!highlightedStock) {\r\n        setQuarterlyError(\"종목을 선택하지 않았습니다. 검색 후 선택해주세요.\");\r\n        return;\r\n      }\r\n\r\n      setQuarterlyLoading(true);\r\n      setQuarterlyError(\"\");\r\n      setQuarterlyData([]);\r\n      setQuarterlySelectedButton(buttonName);\r\n\r\n      let endpoint = \"\";\r\n      if (buttonName === \"매출액\") {\r\n        endpoint = \"financial-quarterly-sales\";\r\n      } else if (buttonName === \"영업이익\") {\r\n        endpoint = \"financial-quarterly-operating-profit\";\r\n      } else if (buttonName === \"영업이익률\") {\r\n        endpoint = \"financial-quarterly-operating-income-rate\";\r\n      } else if (buttonName === \"순이익\") {\r\n        endpoint = \"financial-quarterly-net-income\";\r\n      } else if (buttonName === \"부채비율\") {\r\n        endpoint = \"financial-quarterly-debt-ratio\";\r\n      } else {\r\n        console.warn(\"지원되지 않는 버튼입니다(분기).\");\r\n        setQuarterlyLoading(false);\r\n        return;\r\n      }\r\n\r\n      try {\r\n        const response = await axios.get(\r\n          `https://port-0-stockter-back-m5or7nt39f4a0f5c.sel4.cloudtype.app/${endpoint}`,\r\n          { params: { stock_name: highlightedStock[\"종목명\"] } }\r\n        );\r\n\r\n        let data = null;\r\n        if (buttonName === \"매출액\" && response.data.quarterly_sales) {\r\n          data = response.data.quarterly_sales;\r\n        } else if (buttonName === \"영업이익\" && response.data.quarterly_operating_profit) {\r\n          data = response.data.quarterly_operating_profit;\r\n        } else if (buttonName === \"영업이익률\" && response.data.quarterly_operating_income_rate) {\r\n          data = response.data.quarterly_operating_income_rate;\r\n        } else if (buttonName === \"순이익\" && response.data.quarterly_net_income) {\r\n          data = response.data.quarterly_net_income;\r\n        } else if (buttonName === \"부채비율\" && response.data.quarterly_debt_ratio) {\r\n          data = response.data.quarterly_debt_ratio;\r\n        }\r\n\r\n        if (data && data.length > 0) {\r\n          setQuarterlyData(data);\r\n        } else {\r\n          setQuarterlyError(`${buttonName} 분기별 데이터가 없습니다.`);\r\n        }\r\n      } catch (error) {\r\n        console.error(\"분기별 데이터 로드 오류:\", error);\r\n        setQuarterlyError(`${buttonName} 분기별 데이터를 가져오는 중 오류가 발생했습니다.`);\r\n      } finally {\r\n        setQuarterlyLoading(false);\r\n      }\r\n    },\r\n    [highlightedStock, quarterlyLoading]\r\n  );\r\n\r\n  // 6) 최신 뉴스 API 호출 함수\r\n  const fetchLatestNews = async () => {\r\n    if (!highlightedStock) {\r\n      setNewsError(\"종목을 선택하지 않았습니다. 검색 후 선택해주세요.\");\r\n      return;\r\n    }\r\n    setNewsLoading(true);\r\n    setNewsError(\"\");\r\n    setNewsData([]);\r\n    try {\r\n      const response = await axios.get(\r\n        \"https://port-0-stockter-back-m5or7nt39f4a0f5c.sel4.cloudtype.app/latest-news\",\r\n        { params: { stock_name: highlightedStock[\"종목명\"] } }\r\n      );\r\n      if (response.data.latest_news && response.data.latest_news.length > 0) {\r\n        setNewsData(response.data.latest_news);\r\n      } else {\r\n        setNewsError(\"최신 뉴스 데이터가 없습니다.\");\r\n      }\r\n    } catch (error) {\r\n      console.error(\"최신 뉴스 로드 오류:\", error);\r\n      setNewsError(\"최신 뉴스 데이터를 가져오는 중 오류가 발생했습니다.\");\r\n    } finally {\r\n      setNewsLoading(false);\r\n    }\r\n  };\r\n\r\n  // 7) 자동 스크롤 (연간/분기)\r\n  useEffect(() => {\r\n    if (annualData.length > 0 && annualChartRef.current) {\r\n      annualChartRef.current.scrollIntoView({ behavior: \"smooth\", block: \"start\" });\r\n    }\r\n  }, [annualData]);\r\n\r\n  useEffect(() => {\r\n    if (quarterlyData.length > 0 && quarterlyChartRef.current) {\r\n      quarterlyChartRef.current.scrollIntoView({ behavior: \"smooth\", block: \"start\" });\r\n    }\r\n  }, [quarterlyData]);\r\n\r\n  const annualChartData = {\r\n    labels: annualData.map((item) => item.연도 || item.label || \"N/A\"),\r\n    datasets: [\r\n      {\r\n        label: isPercentage(annualSelectedButton)\r\n          ? `${annualSelectedButton} (%)`\r\n          : `${annualSelectedButton} (억)`,\r\n        data: annualData.map((item) => item[annualSelectedButton]),\r\n        backgroundColor:\r\n          annualSelectedButton === \"매출액\"\r\n            ? \"rgba(75, 192, 192, 0.6)\"\r\n            : annualSelectedButton === \"영업이익\"\r\n            ? \"rgba(255, 159, 64, 0.6)\"\r\n            : annualSelectedButton === \"영업이익률\"\r\n            ? \"rgba(54, 162, 235, 0.6)\"\r\n            : annualSelectedButton === \"순이익\"\r\n            ? \"rgba(153, 102, 255, 0.6)\"\r\n            : annualSelectedButton === \"부채비율\"\r\n            ? \"rgba(255, 206, 86, 0.6)\"\r\n            : \"rgba(75, 192, 192, 0.6)\",\r\n        borderColor:\r\n          annualSelectedButton === \"매출액\"\r\n            ? \"rgba(75, 192, 192, 1)\"\r\n            : annualSelectedButton === \"영업이익\"\r\n            ? \"rgba(255, 159, 64, 1)\"\r\n            : annualSelectedButton === \"영업이익률\"\r\n            ? \"rgba(54, 162, 235, 1)\"\r\n            : annualSelectedButton === \"순이익\"\r\n            ? \"rgba(153, 102, 255, 1)\"\r\n            : annualSelectedButton === \"부채비율\"\r\n            ? \"rgba(255, 206, 86, 1)\"\r\n            : \"rgba(75, 192, 192, 1)\",\r\n        borderWidth: 1,\r\n      },\r\n    ],\r\n  };\r\n\r\n  const quarterlyChartData = {\r\n    labels: quarterlyData.map((item) => item.분기 || item.label || \"N/A\"),\r\n    datasets: [\r\n      {\r\n        label: isPercentage(quarterlySelectedButton)\r\n          ? `${quarterlySelectedButton} (%)`\r\n          : `${quarterlySelectedButton} (억)`,\r\n        data: quarterlyData.map((item) => item[quarterlySelectedButton]),\r\n        backgroundColor:\r\n          quarterlySelectedButton === \"매출액\"\r\n            ? \"rgba(75, 192, 192, 0.6)\"\r\n            : quarterlySelectedButton === \"영업이익\"\r\n            ? \"rgba(255, 159, 64, 0.6)\"\r\n            : quarterlySelectedButton === \"영업이익률\"\r\n            ? \"rgba(54, 162, 235, 0.6)\"\r\n            : quarterlySelectedButton === \"순이익\"\r\n            ? \"rgba(153, 102, 255, 0.6)\"\r\n            : quarterlySelectedButton === \"부채비율\"\r\n            ? \"rgba(255, 206, 86, 0.6)\"\r\n            : \"rgba(75, 192, 192, 0.6)\",\r\n        borderColor:\r\n          quarterlySelectedButton === \"매출액\"\r\n            ? \"rgba(75, 192, 192, 1)\"\r\n            : quarterlySelectedButton === \"영업이익\"\r\n            ? \"rgba(255, 159, 64, 1)\"\r\n            : quarterlySelectedButton === \"영업이익률\"\r\n            ? \"rgba(54, 162, 235, 1)\"\r\n            : quarterlySelectedButton === \"순이익\"\r\n            ? \"rgba(153, 102, 255, 1)\"\r\n            : quarterlySelectedButton === \"부채비율\"\r\n            ? \"rgba(255, 206, 86, 1)\"\r\n            : \"rgba(75, 192, 192, 1)\",\r\n        borderWidth: 1,\r\n      },\r\n    ],\r\n  };\r\n\r\n  return (\r\n    <div className=\"search-page-container\">\r\n      <h2 onClick={resetState} className=\"search-page-title\">\r\n        종목검색\r\n      </h2>\r\n\r\n      <div className=\"search-input-container\">\r\n        <div className=\"search-input-wrapper\">\r\n          <input\r\n            type=\"text\"\r\n            placeholder=\"종목명 또는 종목코드 입력\"\r\n            value={query}\r\n            onChange={handleQueryChange}\r\n            onKeyPress={handleKeyPress}\r\n          />\r\n          <button className=\"search-button\" onClick={() => fetchData()}>\r\n            종목 검색\r\n          </button>\r\n        </div>\r\n        {isDropdownOpen && (\r\n          <div ref={dropdownRef} className=\"dropdown\">\r\n            {filteredStocks.map((stock, index) => (\r\n              <div\r\n                key={index}\r\n                className=\"dropdown-item\"\r\n                onClick={() => handleSuggestionClick(stock)}\r\n              >\r\n                <span\r\n                  dangerouslySetInnerHTML={{\r\n                    __html: highlightMatch(stock[\"종목명\"] || \"\", query),\r\n                  }}\r\n                ></span>\r\n                <span className=\"dropdown-code\">\r\n                  {stock[\"종목코드\"] || \"\"}\r\n                </span>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {error && <p className=\"error-message\">{error}</p>}\r\n\r\n      {highlightedStock && (\r\n        <div className=\"highlighted-stock\">\r\n          <h3>종목 정보</h3>\r\n          <p>시장: {highlightedStock[\"시장\"] || \"N/A\"}</p>\r\n          <p>종목코드: {highlightedStock[\"종목코드\"] || \"N/A\"}</p>\r\n          <p>종목명: {highlightedStock[\"종목명\"] || \"N/A\"}</p>\r\n          <p>업종명: {highlightedStock[\"업종명\"] || \"N/A\"}</p>\r\n          <p>시가총액: {highlightedStock[\"시가총액\"] || \"N/A\"}</p>\r\n        </div>\r\n      )}\r\n\r\n      {stocks.length > 0 && (\r\n        <StockTable\r\n          stocks={stocks}\r\n          excludeKeys={[\r\n            \"시장\",\r\n            \"종목코드\",\r\n            \"종목명\",\r\n            \"업종명\",\r\n            \"시가총액\",\r\n            \"시가총액(숫자형)\",\r\n            \"종목명_lower\",\r\n            \"종목코드_str\",\r\n            \"부채비율\",\r\n          ]}\r\n        />\r\n      )}\r\n\r\n      {stocks.length > 0 && (\r\n        <>\r\n          <h3 className=\"annual-data-title\">연간 재무데이터</h3>\r\n          <div className=\"annual-buttons-container\">\r\n            <button\r\n              onClick={() => handleAnnualButtonClick(\"매출액\")}\r\n              disabled={annualLoading && annualSelectedButton === \"매출액\"}\r\n            >\r\n              {annualLoading && annualSelectedButton === \"매출액\"\r\n                ? \"매출액 로딩 중...\"\r\n                : \"매출액\"}\r\n            </button>\r\n            <button\r\n              onClick={() => handleAnnualButtonClick(\"영업이익\")}\r\n              disabled={annualLoading && annualSelectedButton === \"영업이익\"}\r\n            >\r\n              {annualLoading && annualSelectedButton === \"영업이익\"\r\n                ? \"영업이익 로딩 중...\"\r\n                : \"영업이익\"}\r\n            </button>\r\n            <button\r\n              onClick={() => handleAnnualButtonClick(\"영업이익률\")}\r\n              disabled={annualLoading && annualSelectedButton === \"영업이익률\"}\r\n            >\r\n              {annualLoading && annualSelectedButton === \"영업이익률\"\r\n                ? \"영업이익률 로딩 중...\"\r\n                : \"영업이익률\"}\r\n            </button>\r\n            <button\r\n              onClick={() => handleAnnualButtonClick(\"순이익\")}\r\n              disabled={annualLoading && annualSelectedButton === \"순이익\"}\r\n            >\r\n              {annualLoading && annualSelectedButton === \"순이익\"\r\n                ? \"순이익 로딩 중...\"\r\n                : \"순이익\"}\r\n            </button>\r\n            <button\r\n              onClick={() => handleAnnualButtonClick(\"부채비율\")}\r\n              disabled={annualLoading && annualSelectedButton === \"부채비율\"}\r\n            >\r\n              {annualLoading && annualSelectedButton === \"부채비율\"\r\n                ? \"부채비율 로딩 중...\"\r\n                : \"부채비율\"}\r\n            </button>\r\n          </div>\r\n\r\n          {annualLoading && <p>연간 데이터를 로드 중입니다...</p>}\r\n          {annualError && <p className=\"error-message\">{annualError}</p>}\r\n\r\n          {annualData && annualData.length > 0 && (\r\n            <div\r\n              className=\"financial-data-chart financial-chart\"\r\n              ref={annualChartRef}\r\n            >\r\n              <Bar\r\n                data={annualChartData}\r\n                options={{\r\n                  responsive: true,\r\n                  maintainAspectRatio: false,\r\n                  plugins: {\r\n                    legend: { position: \"top\" },\r\n                    title: {\r\n                      display: true,\r\n                      text: `${highlightedStock?.종목명 || \"\"} 연간 ${annualSelectedButton}`,\r\n                    },\r\n                  },\r\n                  scales: {\r\n                    y: {\r\n                      beginAtZero: false,\r\n                      ticks: {\r\n                        callback: function (value) {\r\n                          if (isPercentage(annualSelectedButton)) {\r\n                            return value.toFixed(1) + \"%\";\r\n                          }\r\n                          return value.toLocaleString() + \"억\";\r\n                        },\r\n                      },\r\n                    },\r\n                  },\r\n                }}\r\n              />\r\n            </div>\r\n          )}\r\n        </>\r\n      )}\r\n\r\n      {stocks.length > 0 && (\r\n        <>\r\n          <h3 className=\"quarterly-data-title\">분기별 재무데이터</h3>\r\n          <div className=\"quarterly-buttons-container\">\r\n            <button\r\n              onClick={() => handleQuarterlyButtonClick(\"매출액\")}\r\n              disabled={quarterlyLoading && quarterlySelectedButton === \"매출액\"}\r\n            >\r\n              {quarterlyLoading && quarterlySelectedButton === \"매출액\"\r\n                ? \"매출액 로딩 중...\"\r\n                : \"매출액\"}\r\n            </button>\r\n            <button\r\n              onClick={() => handleQuarterlyButtonClick(\"영업이익\")}\r\n              disabled={quarterlyLoading && quarterlySelectedButton === \"영업이익\"}\r\n            >\r\n              {quarterlyLoading && quarterlySelectedButton === \"영업이익\"\r\n                ? \"영업이익 로딩 중...\"\r\n                : \"영업이익\"}\r\n            </button>\r\n            <button\r\n              onClick={() => handleQuarterlyButtonClick(\"영업이익률\")}\r\n              disabled={quarterlyLoading && quarterlySelectedButton === \"영업이익률\"}\r\n            >\r\n              {quarterlyLoading && quarterlySelectedButton === \"영업이익률\"\r\n                ? \"영업이익률 로딩 중...\"\r\n                : \"영업이익률\"}\r\n            </button>\r\n            <button\r\n              onClick={() => handleQuarterlyButtonClick(\"순이익\")}\r\n              disabled={quarterlyLoading && quarterlySelectedButton === \"순이익\"}\r\n            >\r\n              {quarterlyLoading && quarterlySelectedButton === \"순이익\"\r\n                ? \"순이익 로딩 중...\"\r\n                : \"순이익\"}\r\n            </button>\r\n            <button\r\n              onClick={() => handleQuarterlyButtonClick(\"부채비율\")}\r\n              disabled={quarterlyLoading && quarterlySelectedButton === \"부채비율\"}\r\n            >\r\n              {quarterlyLoading && quarterlySelectedButton === \"부채비율\"\r\n                ? \"부채비율 로딩 중...\"\r\n                : \"부채비율\"}\r\n            </button>\r\n          </div>\r\n\r\n          {quarterlyLoading && <p>분기별 데이터를 로드 중입니다...</p>}\r\n          {quarterlyError && <p className=\"error-message\">{quarterlyError}</p>}\r\n\r\n          {quarterlyData && quarterlyData.length > 0 && (\r\n            <div\r\n              className=\"financial-data-chart financial-chart\"\r\n              ref={quarterlyChartRef}\r\n            >\r\n              <Bar\r\n                data={quarterlyChartData}\r\n                options={{\r\n                  responsive: true,\r\n                  maintainAspectRatio: false,\r\n                  plugins: {\r\n                    legend: { position: \"top\" },\r\n                    title: {\r\n                      display: true,\r\n                      text: `${highlightedStock?.종목명 || \"\"} 분기별 ${quarterlySelectedButton}`,\r\n                    },\r\n                  },\r\n                  scales: {\r\n                    y: {\r\n                      beginAtZero: false,\r\n                      ticks: {\r\n                        callback: function (value) {\r\n                          if (isPercentage(quarterlySelectedButton)) {\r\n                            return value.toFixed(1) + \"%\";\r\n                          }\r\n                          return value.toLocaleString() + \"억\";\r\n                        },\r\n                      },\r\n                    },\r\n                  },\r\n                }}\r\n              />\r\n            </div>\r\n          )}\r\n        </>\r\n      )}\r\n\r\n      {highlightedStock && (\r\n        <div className=\"latest-news-section\">\r\n          <h3>최신 뉴스</h3>\r\n          <button onClick={fetchLatestNews} disabled={newsLoading}>\r\n            {newsLoading ? \"뉴스 로딩 중...\" : \"최신 뉴스 가져오기\"}\r\n          </button>\r\n          {newsError && <p className=\"error-message\">{newsError}</p>}\r\n          {newsData && newsData.length > 0 && (\r\n            <ul className=\"news-list\">\r\n              {newsData.map((newsItem, index) => (\r\n                <li key={index}>\r\n                  <a href={newsItem.link} target=\"_blank\" rel=\"noopener noreferrer\">\r\n                    {newsItem.title}\r\n                  </a>\r\n                  <p>{newsItem.summary}</p>\r\n                  <span>{newsItem.date}</span>\r\n                </li>\r\n              ))}\r\n            </ul>\r\n          )}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SearchPage;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}